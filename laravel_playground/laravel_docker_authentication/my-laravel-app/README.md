### Sanctum
- 一つのデータベーステーブルへユーザーのAPIトークンを保存しておき、受信したリクエストが**Authorizationヘッダに有効なAPIトークンを含んでいるかにより**認証
- Sanctumはトークンは一切使用**しません**。代わりにLaravelへ組み込まれてい**るクッキーベースのセッション認証サービス**を使用します。これにより、XSSによる認証情報リークに対する保護と同時に、CSRF保護・セッションの認証を提供しています。皆さんのSPAのフロントエンドから送信されるリクエストに対し、Sanctumは**クッキーだけを使用して**認証を確立します。
- APIリクエスト認証に使用するため、`APIトークン／パーソナルアクセストークン`をSanctumは発行します。`APIトークンを利用するリクエストを作成する`場合は、`Bearerトークン`として`Authorizationヘッダにトークンを含める`必要があります。
- ユーザーにトークンを発行開始するには、Userモデルで`HasApiTokensトレイト`を使用してください。
```php
$token = $user->createToken('token-name');
return $token->plainTextToken;
```
- ルート保護: 受信リクエストを`すべて認証済みに限定`し、ルートを保護する場合は、`routes/api.php`ファイル中のAPIルートに対してsanctum認証ガードを指定する必要があります。このガードは受信リクエストが認証済みであると保証します。そのリクエストが皆さん自身の`SPAからのステートフルな認証済み`であるか、もしくは`サードパーティからのリクエストの場合は有効なAPIトークンのヘッダを持っているか`のどちらか一方であるか確認します。
```php
Route::middleware('auth:sanctum')->get('/user', function (Request $request) {
    return $request->user();
});
```
- ログインリクエストに成功するとユーザーは認証され、Laravelのバックエンドがクライアントへ発行しているセッションクッキーにより、APIルートに対する以降のリクエストも自動的に認証されます.

